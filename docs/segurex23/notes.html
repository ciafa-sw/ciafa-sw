<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Capitão Diogo Silva">

<title>CIAFA - Oportunidades e desafios no ensino das ciências militares face aos novos contextos tecnológicos</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">CIAFA</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../ideas.html" rel="" target="">
 <span class="menu-text">ideas</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="https://www.academiafa.edu.pt" rel="" target=""><i class="bi bi-link" role="img">
</i> 
 <span class="menu-text">AFA</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://github.com/ciafa-sw" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text">Github</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introdução" id="toc-introdução" class="nav-link active" data-scroll-target="#introdução">Introdução</a></li>
  <li><a href="#domínios-de-operação" id="toc-domínios-de-operação" class="nav-link" data-scroll-target="#domínios-de-operação">Domínios de operação</a></li>
  <li><a href="#autonomia" id="toc-autonomia" class="nav-link" data-scroll-target="#autonomia">Autonomia</a></li>
  <li><a href="#integração-no-ciberespaço" id="toc-integração-no-ciberespaço" class="nav-link" data-scroll-target="#integração-no-ciberespaço">Integração no ciberespaço</a></li>
  <li><a href="#tangentes" id="toc-tangentes" class="nav-link" data-scroll-target="#tangentes">Tangentes</a></li>
  <li><a href="#ensino" id="toc-ensino" class="nav-link" data-scroll-target="#ensino">Ensino</a></li>
  </ul>
<div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="notes.pdf"><i class="bi bi-file-pdf"></i>PDF</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content column-page-left" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Oportunidades e desafios no ensino das ciências militares face aos novos contextos tecnológicos</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Capitão Diogo Silva </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="introdução" class="level1">
<h1>Introdução</h1>
<p>Os novos contextos tecnológicos criam também novas oportunidades e desafios para a defesa. Este documento apresenta algumas considerações sobre estas oportunidades e desafios no largo espectro de operações militares, desde os vários domínios de operçaão e a sua interação, a detalhes acerca de duas tendências tecnológicas em particular (de entre muitas que poderiam ser escolhdas): autonomia e digitalização das operações para o ciberespaço. Estas considerações servirão como base para discutir os desafios que estes contextos levantam ao nível do ensino e formação das ciências militares.</p>
</section>
<section id="domínios-de-operação" class="level1">
<h1>Domínios de operação</h1>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/xx.png" class="img-fluid figure-img" width="300"></p>
<figcaption class="figure-caption">Domínios de operação no séc. XX.</figcaption>
</figure>
</div>
<p>No século XIX, os domínios de operação militar estavam limitados apenas a 2: terrestre e marítimo. O século passado, com incriveis novas invenções, viu o nascer e rápido desenvolvimento de novos domínios: ar, espaço (e, de forma embrionário, o ciberespaço). Em cada um dos domínios, surgiram inúmeras tecnologias que permitiram não só um maior leque de acções possíveis, como também um acelerar na velocidade das operações militares.</p>
<p>Contudo, a crescente produção e consumo de dados, abilitados por melhores tecnologias digitais e de comunicação que permitem um conhecimento situacional claro e detalhado, também requerem uma maior integração entre domínios.</p>
<div data-columns="2">
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/Multi-domain_operations,investmentPlan2020.png" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">Modernizing how we fight <a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></figcaption>
</figure>
</div>
</div>
<div class="column" style="width:50%;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="assets/Multi-domain_operations.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<p>Hoje, falamos em operações multidominio, com acções paralelas, sincronizadas e em simultânio em distintos domínios de operação, com objetivos táticos diferentes mas convergentes ao mesmo objetivo operacional.</p>
<p>Os domínios aqui apresentados são, contudo, apenas a ponta do icebergue. Todos os domínios estão em contacto com as dimensões humana, legal, cultural, política, opinão pública, etc. A nossa noção de defesa, para que esta cumpra o seu propósito, tem de crescer além do que eram os grandes chavões e faróis do passado.</p>
</section>
<section id="autonomia" class="level1">
<h1>Autonomia</h1>
<p>A adoção de autonomia nos processos é uma tendência que vindo a ser acelerada. Identifico duas categorias distintas nesta autonomia (não necessáriamente mutuamente exclusivas): informação e robótica.</p>
<p>Por <strong>autonomia na informação</strong>, refiro-me a autonomia aplicada a dados, sem estar necessáriamente encorpada, nem interagindo com sistemas físicos. Alguns exemplos passam pelo processamento de dados, com o intuito de extração de informação para os sistemas de decisão. Apesar de os novos contextos operacionais colocarem à nossa disposição uma quantidade de fontes de dados sem precedentes, estes dados não se traduzem imediatamente, nem necessáriamente, em contribuições úteis para os sistemas de decisão.</p>
<p>Se no passado o grande esforço para transformar os dados em informação útil estava sob a resposabildade de humanos (analistas, decisores, comandantes, etc.), hoje nenhum humano consegue acompanhar, em tempo útil, o ritmo e volume de dados produzidos. É necessário, portanto, garantir que colocamos a tecnologia ao serviço de um problema que ela mesma criou (e isto é outra tendência só por si), e criar mecanismos para a <strong>análise automática de dados</strong>. A análise estatistica sempre teve um lugar nas caixas de ferramentas dos analistas, mas hoje, com a emergência de novas capacidades dos sistemas de aprendizagem automática e inteligência artificial, um novo leque de possibilidades foi aberto, e temos de tirar partido dele.</p>
<p>Paralelamente, a autonomia tem vindo a ter cada vez mais expressão em domónios encorpados, onde <strong>sistemas robóticos</strong> fazem cada vez mais e melhor. Este sistemas autónomos podem dar uma grande contribuição numa tipologia de missões especifica - as chamadas <strong>missões DDD</strong>:</p>
<ul>
<li>o primeiro “D” refere-se a missões aborrecidas (<em>dull</em>), e.g.&nbsp;patrulhamento marítimo;</li>
<li>o segundo refere-se a missões “sujas” (<em>dirty</em>), e.g.&nbsp;operação em ambientes contaminados;</li>
<li>o último refere-se a missões perigosas (<em>dangerous</em>), e.g.&nbsp;operação em ambiente hóstil.</li>
</ul>
<p>Desta forma, estes sistemas permitem minorar o risco colocado aos recursos humanos, que são recursos não renováveis e de mais díficil substituição.</p>
<p>E as capacidades avançadas que estes sistemas robóticos apresentem com cada vez mais frequença já não estão apenas ao alcance de organizações e empresas com grande capacidade de investimento. Muito pelo contrário, dissiminação livre do conhecimento e aos baixos custos permitidos pela globalização garantiram a <strong>democratização de tecnologias de autonomia</strong>, e é atualmente possível comprar sistemas aéreos com capacidade de autonomia nos locais mais banais, por vezes comercializados como brinquedos. Estes sistemas podem ser adquiridos por qualquer pessoa, sem identificação, formação específica ou compromisso nos limites à sua utilização. Adicionalmente, estes sistemas comerciais de baixo custo podem ser facilmente armados e utilizados em contextos operacionais. Este cenário é precisamente o que está a acontecer na guerra da Ucrânia.</p>
<p>Adicionalmente, qualquer pessoa consegue, sem conhecimentos técnicos avançados, contruir um destes sistemas seguindo tutoriais simples e de livre acesso, usando apenas componentes de baixo custo e facilmente adquiridos. Estes mesmos sistemas de baixo custo podem ser programados e dotados de maior capacidade de autonomia com mais algum conhecimento técnico, não sendo contudo necessário o investimento de milhões e o envolvimento de largas equipas de engenheiros como tradicionalmente acontece no complexo militar-industrial.</p>
</section>
<section id="integração-no-ciberespaço" class="level1">
<h1>Integração no ciberespaço</h1>
<p>A vida no ciberespaço é, cada vez mais, uma realidade. Uma boa parte da população conduz, pelo menos parcialmente, a sua vida (profisisonal e pessoal) neste novo espaço sem fronteiras. As transformações digitais, que são cada vez mais pedidas e bem-vindas, trazem consigo uma nova vaga de eficiência e novas possibilidades, mas também novos riscos, ameaças e desafios.</p>
<p>No cerne desta transformação está a informação. O ciberespaço é, resumidamente e de forma simplificada, informação em fluxo. Por esta razão, é crucial ver <strong>informação como um <em>asset</em> militar</strong>. É a produção e trânsito de informação que permitiu aumentar a eficiência em cada um dos domínios de operação. Também é a informção que permite uma integração transversal dos domínios, florindo em operações multi-dominio. Por estas razões (entre muitas outras), a informação tem de ser vista como um bem essencial a usar e defender de forma estratégica, no planeamento das operações e na sua execução.</p>
<p>O seu papel determinante na sociedade significa que temos de garantir a <strong>supremacia no ciberespaço</strong>, tal como percebemos que tinhamos de garantir a supremacia aérea quando o domínio do ar tomou expressão nas operações militares. Isto traduz-se pela nossa habilidade em ter acesso e poder usar o ciberespaço para os interesses nacionais. Mas também significa que, idealmente, conseguimos projectar o nosso poder cibernético para acções ofensivas, em caso de necessidade.</p>
<ul>
<li><p>autonomia no ciberespaço TODO</p></li>
<li><p>computação quântica TODO</p></li>
<li><p>Riscos e ameaças</p>
<ul>
<li>a autonomia apresenta aqui um duplo papel de risco e oportunidade, pois pode permitir automatizar e respondar mais rapidamente a ataques, mas os ataques também podem ser autónomos; mais uma vez entra aqui em questão a velocidade das operações, e as defesas não podem ser mais lentas que as ferramentas ofensivas</li>
<li>outra grande ameaça é a emergência da computação quântica, que promete disromper o status quo no que diz respeito às ferramentas criptográficas que são, hoje, amplamente usadas</li>
</ul></li>
</ul>
</section>
<section id="tangentes" class="level1">
<h1>Tangentes</h1>
<ul>
<li><p>Considerações geopolíticas na defesa TODO</p></li>
<li><p>Utilização ética dos domínios e novas ferramentas TODO</p></li>
<li><p>ao nível da defesa, como analisar a evolução tecnológica</p></li>
<li><p>corrida a tecnologias de valor estratégico</p></li>
<li><p>que implica corrida a matéria prima e equipamento também de valor estratégico</p></li>
<li><p>para garantir acesso e produção destes equipamentos</p></li>
<li><p>o que podemos ou não fazer</p></li>
<li><p>o que nos diz a Lei Internacional Humanitária</p></li>
<li><p>pouco, em áreas de ponta</p></li>
<li><p>e.g.&nbsp;como pensar em autonomia em armas letais - nas armas ou armas autónomas</p></li>
<li><p>Relacioandas com tudo o que falámos até agora estão 2 dimensões tangentes: geopolítica e ética.</p></li>
<li><p>Ao nível geopolítico temos de repensar o que significam fronteiras em novos domínios como o ciberespaço, e o que as nações podem ou não fazer.</p></li>
<li><p>Por outro lado, tecnologias emergentes e disruptivas como IA estão a criar uma nova corrida ao estado da arte, que, podendo iludir os espectadores, cria também uma corrida a recursos importantes como o acesso e a produção de capacidade de computação.</p></li>
<li><p>Já ao nível da ética, tal temos de atender ao que podemos ou não fazer nos novos domínios em que marcamos presença, e em como, onde e quando (e se) podemos usar ferramentas alimentadas pelas novas tecnologias emergentes, como IA - pensemos em armas autonomas mortiferas</p></li>
<li><p>Existe muito terreno para conquistar no que diz respeito ao uso justo e moral destas ferrametnas, e ainda não chegámos a um consenso a que possamos aderir, muito menos a uma atualização decisiva da Lei Internacional Humanitária no que diz respeito à utilização do ciberespaço, e muito menos para armas autónomas</p></li>
<li><p>Armas autónomas vs.&nbsp;autonomia nas armas</p></li>
</ul>
</section>
<section id="ensino" class="level1">
<h1>Ensino</h1>
<p>Dado o contexto (admitidamente reduzido e limitado à brevidade esperada do documento), estamos agora numa melhor posição para discutir o ensino das ciências militares. Num mundo em permanente, e acelerada, mudança, quais serão as bases para a formação dos nossos militares, quer os que estão a ser preparados para iniciar a carreira, como que estão a ter formação ao longo da vida?</p>
<blockquote class="blockquote">
<p>“Education should <strong>prepare</strong> yong people <strong>for jobs that do not yet exist</strong>, using <strong>technologies that have not yet been invented</strong>, to solve <strong>problems of which we are not yet aware</strong>” - Richard Riley</p>
</blockquote>
<p>Neste nova realidade incerta e dinâmica, temos de preparar os nossos militares e civis ligados à defesa (e não só) para trabalhos e funções que ainda não eistem, usando tecnolgoias que ainda não foram inventadas para resolver problemas dos quais não estamos cientes. Este é o desafio preplexante e avassalador que os docentes e decisores ligados ao ensino enfrentam. Perante tamanho desafio, contudo, a melhor estratégia será partir o problema e tentar conquistar cada uma das partes - ou pelo menos dar passos (eventualmente tímidos) nessa direção. Essas partes vão ser:</p>
<ul>
<li>o que sabemos</li>
<li>o que sabemos que não sabemos</li>
<li>o que não sabemos que não sabemos</li>
</ul>
<p><strong>O que sabemos</strong> é a nossa zona de conforto. É nesta zona que reside o nosso maior contribudo como elementos dos processos de ensino e formação. O que podemos fazer aqui é refazer os currículos (cientes que o ritmo de progresso é superior aos dos ciclos de estudos), retirando o que deixou de ter expressão nas nossas operações e acrescentando novos elementos da realidade que enfrentamos, Haverão, naturalmente, conteúdos que são intemporais, dada a sua faceta elementar e transversal. É, contudo, uma ilusão pensar que esses conteúdos não devem ser recontextualizados face ao constante progresso que vivemos. Conhecimentos e competências intemporais só o são se for forem aplicáveis em qualquer tempo.</p>
<p><strong>O que sabemos que não sabemos</strong> é o que está no horizonte. São as inovações e descobertas que já esperamos, e até contemplamos os novos usos e desafios que trazem. O mais importante que aqui podemos fazer é o investimento na investigação. Só assim podemos dar passos em direção a este horizonte que já imaginamos. Simultâneamente, esta noção do que ainda não existe mas está para vir deve ser passada ao pessoal em formação, o que só é possível se for garantido o investimento nos próprios docentes, permitindo uma frequente atualização do seu conhecimento.</p>
<p><strong>O que não sabemos que não sabemos</strong> é o que está além do horizonte. É o que não imaginamos ou adivinhamos. É o que aparecerá de surpresa. A aposta, aqui, passa pelo desenvolvimento de competências transversais. Competências que dotam as pessoas com a capacidade de analisar e decompor problemas complexos em ambientes dinâmicos, entre outras. Adicionalmente, e discutivelmente mais importante, é o incutir de um espírito auto-didata. Devemos estar cientes, e aceitar, que qualquer oferta formativa que desenhemos, por mais bem pensada que tenha sido, será invariávelmente insuficiente para preparar os militares para realidades que estão, hoje, além da nossa imaginação, e que apresentarão certamente novos e complexos desafios à defesa. Esta mensagem deve ser passada aos formandos e discentes, de forma forte e clara, sublinhando a necessidade de estar alerta para o constante desenrolar de novos acontecimentos e descobertas que ocorrem no quotidiano. Em todo o momento, o militar contrastará os novos contextos cientificos, tecnológicos, sociais, políticos, económicos, com os atuais esforços no âmbito securitário e da defesa, levando-o a uma análise das oportunidades e riscos que nos enfrentam, e alimentando a nossa capacidade de planeamento, acção e reacção aos vários níveis estratégico, operacional e táctico.</p>


</section>


<div id="quarto-appendix" class="default"><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><h2 class="anchored quarto-appendix-heading">Footnotes</h2>

<ol>
<li id="fn1"><p>Modernization — Modernizing how we fight: Future combat will require a different approach than what the Joint Force has previously taken. Multi-Domain Operations (MDO) will enable the Army to give the Joint Force a decisive advantage by forcing an enemy to confront multiple threats simultaneously from multiple domains. The MDO concept guides our entire modernization effort, describing the capabilities we need to compete and win on the future battlefield. –US Army (2020) AMERICA’S ARMY: READY NOW,INVESTING IN THE FUTURE FY19-21 accomplishments and investment plan<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>